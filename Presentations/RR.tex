%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Beamer Presentation
% LaTeX Template

\documentclass{beamer}
\mode<presentation> {
% Theme
\usetheme{metropolis}
%\setbeamertemplate{footline} % To remove the footer line in all slides uncomment this line
%\setbeamertemplate{footline}[page number] % To replace the footer line in all slides with a simple slide count uncomment this line
%\setbeamertemplate{navigation symbols}{} % To remove the navigation symbols from the bottom of all slides uncomment this line
}

%Packages
\usepackage{graphicx} % Allows including images
\usepackage{booktabs} % Allows the use of \toprule, \midrule and \bottomrule in tables
%\usepackage{cite}
\usepackage[numbers]{natbib} % For bibliography
\usepackage{multirow}
\usepackage{hyperref}
%\usetheme{Warsaw}
\usepackage[absolute,overlay]{textpos}


% Prepare title and TOC
\title[Short title]{Reproducible Research} 
\author{Marco Chiapello} 
\institute[Center for Proteomics] 
{
Center for Proteomics\\
University of Cambridge \\ 
\medskip
\textit{mc983@cam.ac.uk} 
}
\date{\today} 

%\AtBeginSection[]
%{
%\begin{frame}<beamer>
%\frametitle{Overview}
%\tableofcontents[currentsection]
%\end{frame}
%}


%-------------------------------------------
% MAIN DOCUMENT
%-------------------------------------------
\begin{document}

%-------------------------------------------
% TITLE PAGE
%-------------------------------------------
\begin{frame}
\titlepage 
\end{frame}

%-------------------------------------------
% TABLE OF CONTENTS
%-------------------------------------------
\begin{frame}{Overview}
\small
\tableofcontents
\end{frame}

%----------------------------------------------------------------------------------------
%	PRESENTATION SLIDES
%----------------------------------------------------------------------------------------

\begin{frame}
\section{Introduction} 
\vspace{50px}
\begin{flushright}
\scriptsize {\bf Replication} is the ultimate standard by which scientific claims are judged \citep{Peng:2011et}\\
\scriptsize The fact that an analysis is reproducible does not guarantee the quality, correctness, or validity of the published results. 
\end{flushright}
\end{frame}
%------------------------------------------------

\begin{frame}
\frametitle{What reproducible research is}
\begin{figure}
\includegraphics[scale=0.45]{figures/001.jpg}
\end{figure}
\end{frame}
%This slide contains a picture about reproducibility
%------------------------------------------------

\begin{frame}
\frametitle{What reproducible research is}
\begin{figure}
\includegraphics[scale=0.45]{figures/thenamiracleoccurs.jpg}
\end{figure}
\footnotesize
\begin{itemize}
\item This is exactly how it seems when you try to figure out how authors got from a large and complex data set to a dense paper with lots of busy figures. \\Without access to the data and the analysis code, a miracle occurred.
\item And  there should be {\sc no miracles in science.} \citep{Markowetz:2016cs}
\end{itemize}
\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{What reproducible research is}
\Large\centering $DATA +  ANALYSIS \rightarrow RESULTS$\\
\rule{\textwidth}{0.05pt}\vspace{20px}
Common practice of writing statistical reports: 
\small\begin{itemize}
    \item We import a dataset into Excel
    \item Run a procedure to get all results
    \item Copy and paste selected pieces into a typesetting program
    \item Add a few descriptions
    \item Finish a report
\end{itemize}

\end{frame}


%------------------------------------------------
\begin{frame}
\frametitle{What reproducible research is}

\Large There are obvious dangers and disadvantages in this process:
\small\begin{enumerate}
    \item It is error-prone due to too much manual work;
    \item It requires lots of human effort to do tedious jobs; 
    \item The workflow is barely recordable, therefore it is difficult to reproduce;
    \item A tiny change of the data source in the future will require the author(s) to go through the same procedure again;
    \item The analysis and writing are separate, so close attention has to be paid to the synchronization of the two parts.
\end{enumerate}
\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{What reproducible research is}
\Large \centering What is Reproducible Research?\\ 
{\sc The ability to reproduce someone else results}\\
\rule{\textwidth}{0.1pt}\\
\Large \centering What do you need?\\ 
\begin{itemize}
\item[--] Analytic data 
\item[--] Analytic code
\item[--] {\bf Documentation for data and code} 
\end{itemize}
\end{frame}


%------------------------------------------------

\begin{frame}
\frametitle{What reproducible research is}
\centering{\sc\Large Reproducible vs Replicable}
\begin{table}[]
\centering
\begin{tabular}{cccc}
                                           &                                & \multicolumn{2}{c}{DATA}                          \\ \cline{3-4}
                                           & \multicolumn{1}{c|}{}          & Same         & \multicolumn{1}{c|}{Different}     \\ \cline{2-4}
\multicolumn{1}{c|}{\multirow{2}{*}{CODE}} & \multicolumn{1}{c|}{Same}      & Reproducible & \multicolumn{1}{c|}{Replicable}    \\
\multicolumn{1}{c|}{}                      & \multicolumn{1}{c|}{Different} & Robust       & \multicolumn{1}{c|}{Generalisable} \\ \cline{2-4}
\end{tabular}
\end{table}
\vspace{3px}
\tiny Ref: {\url{https://github.com/KirstieJane/ReproducibleResearch}}
\end{frame}


%------------------------------------------------
\begin{frame}
\frametitle{What reproducible research is}

\Large{Reproducibility/reproduce}\\ \footnotesize A study is reproducible if there is a specific set of computational functions/analyses (usually specified in terms of code) that exactly reproduce all of the numbers in a published paper from raw data.

\Large{Replication/replicate}\\ \footnotesize A study is only replicable if you perform the exact same experiment (at least) twice, collect data in the same way both times, perform the same data analysis, and arrive at the same conclusions.
\rule{\textwidth}{0.05pt}
{\bf Replicability} requires new samples and new data\footnote{\tiny{in particular biological replicates}}, which introduces new variability, and additional risks of errors. {\bf Reproducibility} is, to some extent, a technical challenge, while replication gives the results scientific validity.
\rule{\textwidth}{0.05pt}\\
\vspace{3px}
\tiny Ref: {\url{https://github.com/lgatto/TeachingMaterial/tree/master/open-rr-bioinfo-best-practice}}
\end{frame}
%------------------------------------------------

\begin{frame}
\section{Reproducible research Reasons}
\vspace{50px}
\begin{flushright}
\scriptsize How does working reproducibly help to achieve more as a scientist \citep{Markowetz:2016cs}\\
\end{flushright}
\end{frame}
%------------------------------------------------

\begin{frame}
\frametitle{Reasons to work reproducibly}
\Large REPRODUCIBILITY \citep{Markowetz:2016cs}\\
Idealist:
\begin{enumerate}
\tiny
\item It is the foundation of science!
\item The world would be a better place if everyone worked transparently and reproducibly!
\end{enumerate}
Realist:
\begin{enumerate}
\footnotesize
\item It helps to avoid disaster
\begin{itemize}
\tiny
\item You need to record in detail how you got there
\item Work reproducibly early on will save you time later
\end{itemize}
\item It makes it easier to write papers
\begin{itemize}
\tiny
\item To have very transparent data and code, it costs just few minutes to spot a mistake (if any)
\end{itemize}
\item It helps reviewers see it your way
\begin{itemize}
\tiny
\item Made the data and well-documented code easily accessible to the reviewers
\end{itemize}
\item It enables continuity of your work
\begin{itemize}
\tiny
\item How can you ensure the continuity of work in your lab if progress is not documented reproducibly?
\item No proof of reproducibility, no result!
\end{itemize}
\item It helps to build your reputation
\begin{itemize}
\tiny
\item To build a reputation for being an honest and careful researcher
\end{itemize}

\end{enumerate}

\end{frame}

%------------------------------------------------
\begin{frame}
\section{Reproducible research Rules}
\vspace{30pt}
\scriptsize  
\raggedleft -- based on Sandve et al., 2013 \citep{Sandve:2013gh}
\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 1}
\small{\sc For Every Result, Keep Track of How It Was Produced}
\begin{itemize}
    \item  The full sequence of pre- and post-processing steps are often critical in order to reach the achieved result
    \item Every detail that may influence the execution of the step should be recorded
    \item Include the name and version of the program, as well as the exact parameters and inputs
\end{itemize}
\begin{quote}As a minimum, you should at least record sufficient details on programs, parameters, and manual procedures to allow yourself, in a year or so, to approximately reproduce the results\end{quote}
\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 2}
\small{\sc Avoid Manual Data Manipulation Steps}
\begin{itemize}
    \item Manual procedures are not only inefficient and error-prone, they are also difficult to reproduce
    \item Manual modification of files can usually be replaced by the use of standard UNIX commands or scripts
    \item Manual tweaking of data files to attain format compatibility should be replaced by format converters that can be reenacted and included into executable workflows
    \item Manual operations like the use of copy and paste between documents should also be avoided
\end{itemize}
\begin{quote}
If manual operations cannot be avoided, you should as a minimum note down which data files were modified or moved, and for what purpose
\end{quote}

\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 3}
\small{\sc Archive the Exact Versions of All External Programs Used}

\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 4}


\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 5}


\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 6}


\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 7}


\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 8}


\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 9}


\end{frame}
%------------------------------------------------
\begin{frame}
\frametitle{Rule 10}


\end{frame}
%------------------------------------------------
\begin{frame}
\section{Reproducible research Tools}
\begin{quote}
\scriptsize    Let us change our traditional attitude to the construction of programs: Instead of imagining that our main task is to instruct a computer what to do, let us concentrate rather on explaining to humans what we want the computer to do.\\
\raggedleft   -- Donald E. Knuth Literate Programming, 1984
\end{quote}
\end{frame}
%------------------------------------------------

\begin{frame}
\frametitle{Tools}
{\bf Literate programming} is a methodology that combines a programming language with a documentation language\\ 
\begin{itemize}
    \item Write program code to do computing
    \item Write narratives to explain what is being done by the program code
\end{itemize}
\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{Tools}
At the lowest level, working reproducibly just means avoiding beginners? mistakes. Keep your project organized, name your files and directories in some informative way, store your data and code at a single backed-up location. Don?t spread your data over different servers, laptops and hard drives.To achieve the next levels of reproducibility, you need to learn some tools of computational reproducibility [8]. In general, reproducibility is improved when there is less clicking and pasting and more scripting and coding. For example, do your analysis in R (https://www.r-project.org/) or Python (https:// www.python.org/) and document your analysis using knitR (http://yihui.name/knitr/) or IPython notebooks (http:// ipython.org/). These tools help you to merge descriptive text with analysis code into dynamic documents that can be automatically updated every time the data or code change.As a next step, learn how to use a version-control system like git (https://git-scm.com/) on a collaborative platform such as GitHub (https://github.com/). Finally, if you want to become a pro, learn to use docker (http://www.docker.com/), which will make your analysis self-contained and easily transportable to different systems.
\end{frame}


%------------------------------------------------
\begin{frame}
\frametitle{Tools}


Learning the tools of the trade will require commitment and a massive investment of your time and energy. A priori it is not clear why the benefits of working reproducibly outweigh its costs.

Does reproducibility sound like extra work? It can be, particularly when one is first trying to do it, that is, to break one's own previous nonreproducible habits


\end{frame}

%------------------------------------------------
\section{Conclusion}
%------------------------------------------------

\begin{frame}
\frametitle{Conclusions}

My advice is: learn the tools of reproducibility (Box 1) as quickly as possible and use them in every project.
\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{References}
\fontsize{6}{7.2}\selectfont
\bibliographystyle{apalike}
\bibliography{bib2}
\end{frame}
%------------------------------------------------

\begin{frame}
\frametitle{Acknowledgements}
\begin{itemize}
\item[--] \Large Mike Deery \small{ Manager of the Cambridge Center for Proteomics}
\item[--] \Large Laurent Gatto \small{Computational Proteomics Unit}
\vspace{20px}
\item[--] \Large Andrea Genre \small{Universita' di Torino}
\end{itemize}
\end{frame}



%----------------------------------------------------------------------------------------

\end{document}
